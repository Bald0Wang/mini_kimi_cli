# 08. 远航：无尽的进化 (Future Roadmap)

> "未来已来，只是分布不均。" —— William Gibson

恭喜你，你已经完成了 Mini Kimi 的入门课程。但对于 AI Agent 这个领域来说，这仅仅是一个开始。如果你把 Mini Kimi 看作是一个细胞，那么完整的 Kimi CLI 就是一个复杂的生物体。而在这个生物体之外，还有更广阔的生态系统等待你去探索。多智能体协作、自主进化、多模态感知……这些不是科幻小说，而是正在发生的现实。

### 知识加油站 ⛽️

#### 1. 多智能体系统 (Multi-Agent Systems, MAS)
如果说单个 Agent 是全能选手，那么 MAS 就是一个专家团队。在 MAS 中，不同的 Agent 扮演不同的角色（如产品经理、程序员、测试员），它们通过协作来完成复杂的任务。这种模式模仿了人类社会的组织结构，能显著提升解决复杂问题的能力。
*   **代表项目**: [MetaGPT](https://github.com/geekan/MetaGPT), [ChatDev](https://github.com/OpenBMB/ChatDev)

#### 2. 通用人工智能 (AGI)
Agent 发展的终极目标是什么？是 AGI。一种具备像人类一样（甚至超越人类）的广泛认知能力的智能系统。虽然我们距离真正的 AGI 还有很长的路要走，但每一个 Agent 的迭代，都是在向这个目标迈进的一小步。

---

### 学习目标

- 明确 Mini Kimi 当前有哪些“刻意的简化”
- 为下一步扩展提供可执行的任务列表（不是泛泛而谈）

---

## 路线 A：上下文工程（能处理长对话）

**目标**

- 对话越长，依然能保持成本、速度、质量可控

**建议任务**

- 在 `Soul` 中实现“只保留最近 N 条消息”
- 增加“摘要工具”或“压缩函数”，把旧消息合并为 summary

**推荐落点**

- `mini_kimi/src/mini_kimi/soul/soul.py`：在调用 `llm.chat(...)` 前做裁剪/压缩

**技术细节提示**

- 仅“裁剪最近 N 条”会丢失长期事实；摘要可以保留长期事实但会引入信息损失
- 你可以先从“裁剪 + 手动总结”开始，再逐步自动化

**验收**

- 连续对话 30 轮仍然能正常工作，且不会明显变慢/爆 token

---

## 路线 B：工具安全（可控的执行边界）

**目标**

- 避免误执行危险命令/越权读写

**建议任务**

- `BashTool`：白名单命令或需要确认的命令（审批）
- `WriteFileTool`：限制写入目录范围（例如 `mini_kimi/out/`）

**推荐落点**

- `mini_kimi/src/mini_kimi/tools/bash/bash_tool.py`：执行前检查（拒绝危险命令）
- `mini_kimi/src/mini_kimi/tools/file/write_tool.py`：把写入限定到允许目录

**验收**

- 典型危险命令会被拒绝并给出清晰提示

---

## 路线 C：多智能体（拆分复杂任务）

**目标**

- 复杂任务可以拆分：检索 → 阅读 → 计划 → 编写 → 总结

**建议任务**

- 增加一个“子 Agent”类：只带 Web 工具（SearchWeb/FetchURL）
- 主 Agent 做调度：先让子 Agent 搜索总结，再由主 Agent 写最终输出

**推荐落点（最小实现）**

- 新建一个 `WebSoul`（结构可仿照 `Soul`）：只注册 web 工具
- 主 `Soul` 增加一个方法：先调用 `WebSoul` 获取“检索摘要”，再继续主流程

**验收**

- 完成一个需要检索 + 写文件的任务时，能明确看到分工

---

## 建议扩展顺序（给新手的路线图）

1) 先做 **路线 B 工具安全**（最容易踩坑，也最容易见效）
2) 再做 **路线 A 上下文工程**（对质量与成本影响最大）
3) 最后做 **路线 C 多智能体**（需要更好的抽象与边界设计）
